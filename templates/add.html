<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ–°å¢ç´€éŒ„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>
  <body class="p-4 md:p-8 flex items-center justify-center min-h-screen">
    <div
      class="form-container w-full max-w-md p-8 rounded-xl shadow-2xl border border-white/20"
    >
      <h1 class="text-3xl font-bold text-gray-800 mb-8 text-center">
        âœ¨ æ–°å¢æ”¶å…¥/æ”¯å‡º
      </h1>

      <form
        method="post"
        action="{{ url_for('add_transaction') }}"
        class="space-y-6"
      >
        <!-- é‡‘é¡è¼¸å…¥ -->
        <div class="space-y-2">
          <label for="amount" class="block text-sm font-semibold text-gray-700">
            ğŸ’° é‡‘é¡
          </label>
          <input
            type="number"
            step="0.01"
            name="amount"
            id="amount"
            required
            placeholder="è«‹è¼¸å…¥é‡‘é¡"
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg shadow-sm focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 text-lg bg-white/80 backdrop-blur-sm"
          />
        </div>

        <!-- åˆ†é¡é¸æ“‡ -->
        <div class="space-y-2">
          <label
            for="category_id"
            class="block text-sm font-semibold text-gray-700"
          >
            ğŸ“‚ åˆ†é¡
          </label>
          <select
            name="category_id"
            id="category_id"
            required
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg shadow-sm focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 text-lg bg-white/80 backdrop-blur-sm"
          >
            <option value="" disabled selected>è«‹é¸æ“‡åˆ†é¡</option>
            {% for cat in categories %}
            <option value="{{ cat[0] }}">
              {{ 'ğŸ’°' if cat[2] == 'income' else 'ğŸ’¸' }} {{ cat[1] }}
            </option>
            {% endfor %}
          </select>
        </div>

        <!-- æè¿°è¼¸å…¥ -->
        <div class="space-y-2">
          <label
            for="description"
            class="block text-sm font-semibold text-gray-700"
          >
            ğŸ“ æè¿° <span class="text-gray-400 text-xs">(é¸å¡«)</span>
          </label>
          <input
            type="text"
            name="description"
            id="description"
            placeholder="å‚™è¨»èªªæ˜..."
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg shadow-sm focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 text-lg bg-white/80 backdrop-blur-sm"
          />
        </div>

        <!-- æ—¥æœŸé¸æ“‡ -->
        <div class="space-y-2">
          <label for="date" class="block text-sm font-semibold text-gray-700">
            ğŸ“… æ—¥æœŸ
          </label>
          <input
            type="date"
            name="date"
            id="date"
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg shadow-sm focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 text-lg bg-white/80 backdrop-blur-sm"
          />
        </div>

        <!-- æäº¤æŒ‰éˆ• -->
        <button
          type="submit"
          class="w-full gradient-button success justify-center py-4 text-lg font-bold hover:shadow-xl transition-all duration-300 mt-8"
        >
          âœ… æ–°å¢è¨˜éŒ„
        </button>
      </form>

      <!-- è¿”å›é€£çµ -->
      <div class="mt-8 text-center">
        <a
          href="{{ url_for('home') }}"
          class="inline-flex items-center gap-2 text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-300 hover:underline"
        >
          â† å›åˆ°é¦–é 
        </a>
      </div>
    </div>

    <script>
      // è‡ªå‹•è¨­å®šä»Šå¤©çš„æ—¥æœŸ
      document.addEventListener("DOMContentLoaded", function () {
        const dateInput = document.getElementById("date");
        if (!dateInput.value) {
          const today = new Date().toISOString().split("T")[0];
          dateInput.value = today;
        }
      });

      // è¡¨å–®é©—è­‰å¢å¼·
      document.querySelector("form").addEventListener("submit", function (e) {
        const amount = document.getElementById("amount").value;
        if (amount <= 0) {
          e.preventDefault();
          alert("è«‹è¼¸å…¥å¤§æ–¼0çš„é‡‘é¡ï¼");
          return;
        }
      });
    </script>
  </body>
</html>
